databaseChangeLog:
- changeSet:
    id: 2021-07-05--0003--books
    author: Vitaliy Luzhnyh
    createTable:
      tableName: books
      columns:
        - column:
            name: id
            type: bigint
            autoIncrement: true
            constraints:
              nullable: false;
              primaryKey: true
              primaryKeyName: pk_book
        - column:
            name: name
            type: varchar(100)
            constraints:
              nullable: false
              unique: true
        - column:
            name: genre_id
            type: bigint
            constraints:
              nullable: false
              references: genres(id)
              foreignKeyName: fk_book_genre
              deleteCascade: true
              referencedColumnNames: id
              referencedTableName: genres
              validateForeignKey: true
              checkConstraint: true
        - column:
            name: author_id
            type: bigint
            constraints:
              nullable: false
              references: authors(id)
              foreignKeyName: fk_book_author
              deleteCascade: true
              referencedColumnNames: id
              referencedTableName: authors
              validateForeignKey: true
              checkConstraint: true
    addUniqueConstraint:
      tableName: books
      columnNames: author_id, name
      constraintName: uq_unique_book
